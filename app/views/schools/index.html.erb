<% content_for :page_title, 'Map' %>

<div class="row">
  <div class="col-md-8">
    <h1>Energy Sparks schools across the UK</h1>
  </div>
</div>

<div class="map" id="geo-json-map"></div>

<div class="col-md-12">

  <p>Discover which schools are using Energy Sparks to reduce their energy usage.</p>
  <p>We have <%= @schools.count %> schools across England, Wales, and Scotland including state primary and secondary schools, independent schools, special schools and nursery schools.</p>
  <p>Explore their electricity and gas consumption data, find out how much energy they generate from their solar panels and learn about their energy saving activities.</p>
  <p>Weâ€™re proud to have a great network of schools all working hard to save energy and help fight climate change.</p>

  <br/>

  <h2>View Energy Sparks schools by group</h2>
  <div class="row">
    <% school_groups_left, school_groups_right = @school_groups.partition.with_index{|_,v| v.even?} %>
    <div class="col-lg-6">
      <% school_groups_left.each do |school_group| %>
        <%= render 'school_group', school_group: school_group %>
      <% end %>
    </div>
    <div class="col-lg-6">
      <% school_groups_right.each do |school_group|  %>
        <%= render 'school_group', school_group: school_group %>
      <% end %>
    </div>
  </div>

  <br/>
  <br/>

  <div class="all-schools"
    <h2>View all Energy Sparks schools</h2>
    <div class="row">
      <div class="col-lg-12">
        <%= render 'schools', schools: @schools, title: 'A to Z of all Energy Sparks schools', label: 'allSchools' %>
      </div>
    </div>
  </div>

  <% if @schools_not_visible.any? && can?(:read_invisible_schools, School)%>
    <br/>
    <br/>
    <h2>Not visible schools</h2>
    <div class="row">
      <div class="col-lg-12">
        <%= render 'schools', schools: @schools_not_visible, title: 'Not visible schools', label: 'invisibleSchools' %>
      </div>
    </div>
  <% end %>

</div>
