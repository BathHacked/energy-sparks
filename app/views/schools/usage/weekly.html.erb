<% content_for :page_title, "Explore weekly usage by day for #{@school.name}" %>

<div class="container charts" id="weekly-usage">
  <div class="row">
    <div class="col-md-12">
      <h1>Weekly usage by day</h1>
      <p>Explore how much energy you use per day for <%= link_to @school.name, school_path(@school), id: "school" %></p>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <%= chart_tag(@school, nil, show_advice: false, html_class: 'usage-chart') %>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <p class="text-center" id="graph-explainer"></p>
    </div>
  </div>

  <%= form_tag "", method: :get, id: "chart-filter" do %>
    <%= hidden_field_tag :period, "weekly" %>
    <%= hidden_field_tag :configuration, nil, data: @chart_config %>

    <div class="card-deck">
      <%= render partial: 'supply', locals: {current_supply: @supply, configuration: @chart_config} %>
      <%= render partial: 'comparison_type_card', locals: {current_supply: @supply, show_measurements: true} %>
      <%= render partial: 'whole_school_card',
        locals: { current_supply: @supply, school: @school, first_option: "First week (starts Sunday)", second_option: "Second week (starts Sunday)", week_picker: true } %>
      <%= render partial: 'within_school_card',
        locals: { current_supply: @supply, school: @school, date_option: "Which week shall we show?", week_picker: true } %>
    </div>
  <% end %>

  <%= render partial: 'interpretation', locals: { supply: @supply } %>
</div>
