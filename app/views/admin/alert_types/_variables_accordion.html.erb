<div class="accordian mb-2 mt-2" id="templateVariablesCard">
  <% template_variables.each_with_index do |(heading, variables), index| %>
    <div class="card">
      <div class="card-header" id="templateVariablesHeader<%=index%>">
        <h2 class="mb-0 pt-0">
          <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#templateVariables<%=index%>" aria-expanded="true" aria-controls="collapseOne">
            <%= heading %> variables
          </button>
        </h2>
      </div>
      <div id="templateVariables<%=index%>" class="collapse" aria-labelledby="templateVariablesHeader" data-parent="#templateVariablesCard">
        <table class="table">
          <thead>
            <tr>
              <th>Variable</th>
              <th>Description</th>
              <th>Units</th>
            </tr>
          </thead>
          <% variables.each do |key, details| %>
            <tr>
              <td>{{<%= key %>}}</td>
              <td><%= details[:description] %></td>
              <td>
                <% if details[:units].is_a?(Hash) %>
                  <% details[:units].each do |key, value| %>
                    <%= key %> (<%= value %>)
                  <% end %>
                <% else %>
                  <%= details[:units] %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </table>
      </div>
    </div>
  <% end %>
</div>
